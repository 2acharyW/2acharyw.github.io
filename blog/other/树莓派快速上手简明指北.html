<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>树莓派快速上手简明指北 | Zachary&#39;s Blog</title>
    <meta name="description" content="Nothing&#39;s gonna change my love">
    
    
    <link rel="preload" href="/assets/css/styles.432c033e.css" as="style"><link rel="preload" href="/assets/js/app.432c033e.js" as="script"><link rel="preload" href="/assets/css/1.styles.64fbac9c.css" as="style"><link rel="preload" href="/assets/js/1.64fbac9c.js" as="script"><link rel="preload" href="/assets/js/21.1e1439b5.js" as="script"><link rel="prefetch" href="/assets/css/5.styles.3cb36da8.css"><link rel="prefetch" href="/assets/css/6.styles.f1877c65.css"><link rel="prefetch" href="/assets/css/7.styles.47c384b7.css"><link rel="prefetch" href="/assets/js/10.94581156.js"><link rel="prefetch" href="/assets/js/11.6f3e5098.js"><link rel="prefetch" href="/assets/js/12.e47cdd8f.js"><link rel="prefetch" href="/assets/js/13.1a598851.js"><link rel="prefetch" href="/assets/js/14.7c7f26b1.js"><link rel="prefetch" href="/assets/js/15.831c4743.js"><link rel="prefetch" href="/assets/js/16.b802de3e.js"><link rel="prefetch" href="/assets/js/17.1c65cc9a.js"><link rel="prefetch" href="/assets/js/18.c3b884e4.js"><link rel="prefetch" href="/assets/js/19.b389d310.js"><link rel="prefetch" href="/assets/js/2.15147c8d.js"><link rel="prefetch" href="/assets/js/20.41b12b22.js"><link rel="prefetch" href="/assets/js/22.97f042ff.js"><link rel="prefetch" href="/assets/js/23.c8022586.js"><link rel="prefetch" href="/assets/js/24.8a69147a.js"><link rel="prefetch" href="/assets/js/3.bbc0ef3e.js"><link rel="prefetch" href="/assets/js/4.30aa43e9.js"><link rel="prefetch" href="/assets/js/5.3cb36da8.js"><link rel="prefetch" href="/assets/js/6.f1877c65.js"><link rel="prefetch" href="/assets/js/7.47c384b7.js"><link rel="prefetch" href="/assets/js/8.72f66eb2.js"><link rel="prefetch" href="/assets/js/9.b487509f.js">
    <link rel="stylesheet" href="/assets/css/1.styles.64fbac9c.css"><link rel="stylesheet" href="/assets/css/5.styles.3cb36da8.css"><link rel="stylesheet" href="/assets/css/6.styles.f1877c65.css"><link rel="stylesheet" href="/assets/css/7.styles.47c384b7.css"><link rel="stylesheet" href="/assets/css/styles.432c033e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Zachary's Blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/android/" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/blog/flutter/" class="nav-link">Flutter</a></li><li class="dropdown-item"><!----> <a href="/blog/server/" class="nav-link">Server</a></li><li class="dropdown-item"><!----> <a href="/blog/other/" class="nav-link router-link-active">Other</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/zcoderr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/android/" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/blog/flutter/" class="nav-link">Flutter</a></li><li class="dropdown-item"><!----> <a href="/blog/server/" class="nav-link">Server</a></li><li class="dropdown-item"><!----> <a href="/blog/other/" class="nav-link router-link-active">Other</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/zcoderr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <!----> </div> <div class="page"> <div class="content default"><h1 id="树莓派快速上手简明指北"><a href="#树莓派快速上手简明指北" aria-hidden="true" class="header-anchor">#</a> 树莓派快速上手简明指北</h1> <p><em>最近需要弄个可以全天跑 python 爬虫的环境，由于爬取频率只有15分钟一次，手里的腾讯云服务器有一套 api server 在跑，遂想起了我那买来落灰一年多的树莓派，用了几乎一天的时间从刷系统到跑起爬虫，特此整理记录。</em></p> <h2 id="一、安装系统和远程连接"><a href="#一、安装系统和远程连接" aria-hidden="true" class="header-anchor">#</a> 一、安装系统和远程连接</h2> <p><em>按照如下步骤可在 MacOS 下安装 Raspbian 桌面系统，无鼠标无键盘无显示器配置树莓派，更换阿里源，并使用 vnc 连接到树莓派桌面。</em></p> <h3 id="_1-1-刷系统"><a href="#_1-1-刷系统" aria-hidden="true" class="header-anchor">#</a> 1.1 刷系统</h3> <p>首先，在<a href="http://www.raspberrypi.org/downloads" target="_blank" rel="noopener noreferrer">树莓派的官方网站<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>选择下载合适的系统，得到镜像，然后使用命令行进入镜像所在目录。</p> <h6 id="_1-使用读卡器将内存卡插入电脑，并使用-df-命令查看当前已挂载的卷"><a href="#_1-使用读卡器将内存卡插入电脑，并使用-df-命令查看当前已挂载的卷" aria-hidden="true" class="header-anchor">#</a> 1. 使用读卡器将内存卡插入电脑，并使用 df 命令查看当前已挂载的卷</h6> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>xxx@mac: pi<span class="token punctuation">]</span><span class="token variable">$df</span> -h
Filesystem      Size   Used  Avail Capacity  Mounted on
/dev/disk0s2   112Gi   96Gi   15Gi    87%    /
devfs          183Ki  183Ki    0Bi   100%    /dev
map -hosts       0Bi    0Bi    0Bi   100%    /net
map auto_home    0Bi    0Bi    0Bi   100%    /home
/dev/disk1s1    15Gi  2.3Mi   15Gi     1%    /Volumes/未命名
</code></pre></div><p>可以看到 <code>disk1s1</code> 就是内存卡。</p> <h6 id="_2-使用-diskutil-unmount-将内存卡分区卸载"><a href="#_2-使用-diskutil-unmount-将内存卡分区卸载" aria-hidden="true" class="header-anchor">#</a> 2. 使用 diskutil unmount 将内存卡分区卸载</h6> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>xxx@mac: pi<span class="token punctuation">]</span><span class="token variable">$diskutil</span> unmount /dev/disk1s1
2
Volume 未命名 on disk1s1 unmounted
</code></pre></div><h6 id="_3-通过-diskutil-list-来确认设备"><a href="#_3-通过-diskutil-list-来确认设备" aria-hidden="true" class="header-anchor">#</a> 3. 通过 diskutil list 来确认设备</h6> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>xxx@mac: pi<span class="token punctuation">]</span><span class="token variable">$diskutil</span> list
/dev/disk0
   <span class="token comment">#:                       TYPE NAME                    SIZE       IDENTIFIER</span>
   0:      GUID_partition_scheme                        *121.3 GB   disk0
   1:                        EFI                         209.7 MB   disk0s1
   2:                  Apple_HFS Macintosh HD            120.5 GB   disk0s2
   3:                 Apple_Boot Recovery HD             650.0 MB   disk0s3
/dev/disk1
   <span class="token comment">#:                       TYPE NAME                    SIZE       IDENTIFIER</span>
   0:     FDisk_partition_scheme                        *15.8 GB    disk1
   1:               Windows_NTFS 未命名                  15.8 GB    disk1s1
</code></pre></div><p>确认内存卡路径为 /dev/disk1</p> <h6 id="_4-使用-dd-命令将系统镜像入内存卡"><a href="#_4-使用-dd-命令将系统镜像入内存卡" aria-hidden="true" class="header-anchor">#</a> 4. 使用 dd 命令将系统镜像入内存卡</h6> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>xxx@mac: pi<span class="token punctuation">]</span><span class="token variable">$dd</span> bs<span class="token operator">=</span>4m if<span class="token operator">=</span>raspbian.img of<span class="token operator">=</span>/dev/rdisk1
</code></pre></div><p>（说明：/dev/disk1s1是分区，/dev/disk1是块设备，/dev/rdisk1是原始字符设备）</p> <p>等待一段时间后，出现如下提示，说明镜像已经刷好。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>462+1 records <span class="token keyword">in</span>
462+1 records out
1939865600 bytes transferred <span class="token keyword">in</span> 163.133220 secs <span class="token punctuation">(</span>11891297 bytes/sec<span class="token punctuation">)</span>
</code></pre></div><h3 id="_1-2-配置-ssh-和-wifi"><a href="#_1-2-配置-ssh-和-wifi" aria-hidden="true" class="header-anchor">#</a> 1.2 配置 ssh 和 wifi</h3> <p>系统刷好之后，先不要拔下内存卡，继续对内存卡中的文件进行操作以配置 ssh 和 wifi。</p> <h6 id="_1-开启树莓派的-ssh-功能"><a href="#_1-开启树莓派的-ssh-功能" aria-hidden="true" class="header-anchor">#</a> 1. 开启树莓派的 ssh 功能</h6> <p>Raspbian 是默认关闭 ssh 的，在树莓派的 boot 分区，也就是内存卡根目录新建名为 ssh 的空文件即可开启 ssh。</p> <h6 id="_2-配置-wifi"><a href="#_2-配置-wifi" aria-hidden="true" class="header-anchor">#</a> 2. 配置 wifi</h6> <p>同样在内存卡根目录下，新建 wpa_supplicant.conf 文件，并按如下格式编辑 wifi 连接信息。</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>country=CN
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1

<span class="token comment">#如果 wifi 没有密码</span>
network=<span class="token punctuation">{</span>
ssid=&quot;你的无线网络名称（ssid）&quot;
key_mgmt=NONE
<span class="token punctuation">}</span>

<span class="token comment">#如果 wifi 加密方式为 WEP</span>
network=<span class="token punctuation">{</span>
ssid=&quot;你的无线网络名称（ssid）&quot;
key_mgmt=NONE
wep_key0=&quot;你的wifi密码&quot;
<span class="token punctuation">}</span>

<span class="token comment">#如果 wifi 加密方式为 WPA-PSK</span>
network=<span class="token punctuation">{</span>
ssid=&quot;你的无线网络名称（ssid）&quot;
key_mgmt=WPA<span class="token punctuation">-</span>PSK
psk=&quot;你的wifi密码&quot;
<span class="token punctuation">}</span>
</code></pre></div><p>这时，把内存卡插入树莓派开机，便可以在局域网中通过 ssh 连接。</p> <h3 id="_1-3-更换阿里源"><a href="#_1-3-更换阿里源" aria-hidden="true" class="header-anchor">#</a> 1.3 更换阿里源</h3> <p>Raspbian 的软件安装使用 apt-get，为了加快下载速度，通常需要更换为国内源，下面更换为阿里源。</p> <h6 id="_1-修改-etc-apt-sources-list-文件中地址"><a href="#_1-修改-etc-apt-sources-list-文件中地址" aria-hidden="true" class="header-anchor">#</a> 1. 修改 /etc/apt/sources.list 文件中地址</h6> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#deb http://mirrordirector.raspbian.org/raspbian/ stretch main contrib non-free rpi</span>
<span class="token comment"># Uncomment line below then 'apt-get update' to enable 'apt-get source'</span>
<span class="token comment">#deb-src http://archive.raspbian.org/raspbian/ stretch main contrib non-free rpi</span>

<span class="token comment"># use ustc mirror:</span>
deb http://mirrors.aliyun.com/raspbian/raspbian/ stretch main contrib non-free rpi
</code></pre></div><h6 id="_2-修改-etc-apt-raspi-list-文件中地址"><a href="#_2-修改-etc-apt-raspi-list-文件中地址" aria-hidden="true" class="header-anchor">#</a> 2. 修改 /etc/apt/raspi.list 文件中地址</h6> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#deb http://archive.raspberrypi.org/debian/ stretch main ui</span>
<span class="token comment"># Uncomment line below then 'apt-get update' to enable 'apt-get source'</span>
<span class="token comment">#deb-src http://archive.raspberrypi.org/debian/ stretch main ui</span>

<span class="token comment"># use ustc mirror:</span>
deb http://mirrors.aliyun.com/debian/ stretch main ui
</code></pre></div><h3 id="_1-4-安装-vnc-服务"><a href="#_1-4-安装-vnc-服务" aria-hidden="true" class="header-anchor">#</a> 1.4 安装 vnc 服务</h3> <p>对于安装了 Raspbian 桌面系统来说，还有一步就是连接到 Raspbian 的桌面，这里使用 vnc 来进行连接。</p> <h6 id="_1-在树莓派上安装-vnc-server"><a href="#_1-在树莓派上安装-vnc-server" aria-hidden="true" class="header-anchor">#</a> 1. 在树莓派上安装 vnc-server</h6> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> tightvncserver  
</code></pre></div><h6 id="_2-启动-vnc-server"><a href="#_2-启动-vnc-server" aria-hidden="true" class="header-anchor">#</a> 2. 启动 vnc-server</h6> <div class="language-sehll extra-class"><pre class="language-text"><code>tightvncserver
</code></pre></div><p>接下来会要求设置密码和 view-only 密码并启动服务。</p> <h6 id="_3-电脑上连接到树莓派"><a href="#_3-电脑上连接到树莓派" aria-hidden="true" class="header-anchor">#</a> 3. 电脑上连接到树莓派</h6> <p>使用 <a href="https://www.realvnc.com/download/viewer/" target="_blank" rel="noopener noreferrer">vnc-viewer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 客户端，根据树莓派的 ip 和上一步中的启动端口(比如 192.168.1.201:1)和密码即可连接到 Raspbian 桌面</p> <h2 id="二、其它配置"><a href="#二、其它配置" aria-hidden="true" class="header-anchor">#</a> 二、其它配置</h2> <h6 id="_1-更改时区"><a href="#_1-更改时区" aria-hidden="true" class="header-anchor">#</a> 1. 更改时区</h6> <p>刚装玩系统可以通过 <code>date -R</code> 命令查看时区，如果不对，使用 <code>cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</code> 命令将时区修改为东八区。</p></div> <!----> <!----> </div></div><div class="global-ui"></div></div>
    <script src="/assets/js/1.64fbac9c.js" defer></script><script src="/assets/js/21.1e1439b5.js" defer></script><script src="/assets/js/app.432c033e.js" defer></script>
  </body>
</html>
