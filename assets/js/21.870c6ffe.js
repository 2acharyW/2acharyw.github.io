(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{167:function(s,a,t){"use strict";t.r(a);var e={props:["slot-key"],mounted:function(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},n=t(5),r=Object(n.a)(e,function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.slotKey}},[t("h1",{attrs:{id:"树莓派快速上手简明指北"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#树莓派快速上手简明指北","aria-hidden":"true"}},[s._v("#")]),s._v(" 树莓派快速上手简明指北")]),s._v(" "),t("p",[t("em",[s._v("最近需要弄个可以全天跑 python 爬虫的环境，由于爬取频率只有15分钟一次，手里的腾讯云服务器有一套 api server 在跑，遂想起了我那买来落灰一年多的树莓派，用了几乎一天的时间从刷系统到跑起爬虫，特此整理记录。")])]),s._v(" "),t("h2",{attrs:{id:"一、安装系统和远程连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、安装系统和远程连接","aria-hidden":"true"}},[s._v("#")]),s._v(" 一、安装系统和远程连接")]),s._v(" "),t("p",[t("em",[s._v("按照如下步骤可在 MacOS 下安装 Raspbian 桌面系统，无鼠标无键盘无显示器配置树莓派，更换阿里源，并使用 vnc 连接到树莓派桌面。")])]),s._v(" "),t("h3",{attrs:{id:"_1-1-刷系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-刷系统","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.1 刷系统")]),s._v(" "),t("p",[s._v("首先，在"),t("a",{attrs:{href:"http://www.raspberrypi.org/downloads",target:"_blank",rel:"noopener noreferrer"}},[s._v("树莓派的官方网站"),t("OutboundLink")],1),s._v("选择下载合适的系统，得到镜像，然后使用命令行进入镜像所在目录。")]),s._v(" "),t("h6",{attrs:{id:"_1-使用读卡器将内存卡插入电脑，并使用-df-命令查看当前已挂载的卷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用读卡器将内存卡插入电脑，并使用-df-命令查看当前已挂载的卷","aria-hidden":"true"}},[s._v("#")]),s._v(" 1. 使用读卡器将内存卡插入电脑，并使用 df 命令查看当前已挂载的卷")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("xxx@mac: pi"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{attrs:{class:"token variable"}},[s._v("$df")]),s._v(" -h\nFilesystem      Size   Used  Avail Capacity  Mounted on\n/dev/disk0s2   112Gi   96Gi   15Gi    87%    /\ndevfs          183Ki  183Ki    0Bi   100%    /dev\nmap -hosts       0Bi    0Bi    0Bi   100%    /net\nmap auto_home    0Bi    0Bi    0Bi   100%    /home\n/dev/disk1s1    15Gi  2.3Mi   15Gi     1%    /Volumes/未命名\n")])])]),t("p",[s._v("可以看到 "),t("code",[s._v("disk1s1")]),s._v(" 就是内存卡。")]),s._v(" "),t("h6",{attrs:{id:"_2-使用-diskutil-unmount-将内存卡分区卸载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用-diskutil-unmount-将内存卡分区卸载","aria-hidden":"true"}},[s._v("#")]),s._v(" 2. 使用 diskutil unmount 将内存卡分区卸载")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("xxx@mac: pi"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{attrs:{class:"token variable"}},[s._v("$diskutil")]),s._v(" unmount /dev/disk1s1\n2\nVolume 未命名 on disk1s1 unmounted\n")])])]),t("h6",{attrs:{id:"_3-通过-diskutil-list-来确认设备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-通过-diskutil-list-来确认设备","aria-hidden":"true"}},[s._v("#")]),s._v(" 3. 通过 diskutil list 来确认设备")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("xxx@mac: pi"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{attrs:{class:"token variable"}},[s._v("$diskutil")]),s._v(" list\n/dev/disk0\n   "),t("span",{attrs:{class:"token comment"}},[s._v("#:                       TYPE NAME                    SIZE       IDENTIFIER")]),s._v("\n   0:      GUID_partition_scheme                        *121.3 GB   disk0\n   1:                        EFI                         209.7 MB   disk0s1\n   2:                  Apple_HFS Macintosh HD            120.5 GB   disk0s2\n   3:                 Apple_Boot Recovery HD             650.0 MB   disk0s3\n/dev/disk1\n   "),t("span",{attrs:{class:"token comment"}},[s._v("#:                       TYPE NAME                    SIZE       IDENTIFIER")]),s._v("\n   0:     FDisk_partition_scheme                        *15.8 GB    disk1\n   1:               Windows_NTFS 未命名                  15.8 GB    disk1s1\n")])])]),t("p",[s._v("确认内存卡路径为 /dev/disk1")]),s._v(" "),t("h6",{attrs:{id:"_4-使用-dd-命令将系统镜像入内存卡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-使用-dd-命令将系统镜像入内存卡","aria-hidden":"true"}},[s._v("#")]),s._v(" 4. 使用 dd 命令将系统镜像入内存卡")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("xxx@mac: pi"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{attrs:{class:"token variable"}},[s._v("$dd")]),s._v(" bs"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("4m if"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("raspbian.img of"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/rdisk1\n")])])]),t("p",[s._v("（说明：/dev/disk1s1是分区，/dev/disk1是块设备，/dev/rdisk1是原始字符设备）")]),s._v(" "),t("p",[s._v("等待一段时间后，出现如下提示，说明镜像已经刷好。")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("462+1 records "),t("span",{attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n462+1 records out\n1939865600 bytes transferred "),t("span",{attrs:{class:"token keyword"}},[s._v("in")]),s._v(" 163.133220 secs "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("11891297 bytes/sec"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h3",{attrs:{id:"_1-2-配置-ssh-和-wifi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-配置-ssh-和-wifi","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.2 配置 ssh 和 wifi")]),s._v(" "),t("p",[s._v("系统刷好之后，先不要拔下内存卡，继续对内存卡中的文件进行操作以配置 ssh 和 wifi。")]),s._v(" "),t("h6",{attrs:{id:"_1-开启树莓派的-ssh-功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-开启树莓派的-ssh-功能","aria-hidden":"true"}},[s._v("#")]),s._v(" 1. 开启树莓派的 ssh 功能")]),s._v(" "),t("p",[s._v("Raspbian 是默认关闭 ssh 的，在树莓派的 boot 分区，也就是内存卡根目录新建名为 ssh 的空文件即可开启 ssh。")]),s._v(" "),t("h6",{attrs:{id:"_2-配置-wifi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置-wifi","aria-hidden":"true"}},[s._v("#")]),s._v(" 2. 配置 wifi")]),s._v(" "),t("p",[s._v("同样在内存卡根目录下，新建 wpa_supplicant.conf 文件，并按如下格式编辑 wifi 连接信息。")]),s._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[s._v("country=CN\nctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev\nupdate_config=1\n\n"),t("span",{attrs:{class:"token comment"}},[s._v("#如果 wifi 没有密码")]),s._v("\nnetwork="),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v('\nssid="你的无线网络名称（ssid）"\nkey_mgmt=NONE\n'),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{attrs:{class:"token comment"}},[s._v("#如果 wifi 加密方式为 WEP")]),s._v("\nnetwork="),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v('\nssid="你的无线网络名称（ssid）"\nkey_mgmt=NONE\nwep_key0="你的wifi密码"\n'),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{attrs:{class:"token comment"}},[s._v("#如果 wifi 加密方式为 WPA-PSK")]),s._v("\nnetwork="),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v('\nssid="你的无线网络名称（ssid）"\nkey_mgmt=WPA'),t("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v('PSK\npsk="你的wifi密码"\n'),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("这时，把内存卡插入树莓派开机，便可以在局域网中通过 ssh 连接。")]),s._v(" "),t("h3",{attrs:{id:"_1-3-更换阿里源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-更换阿里源","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.3 更换阿里源")]),s._v(" "),t("p",[s._v("Raspbian 的软件安装使用 apt-get，为了加快下载速度，通常需要更换为国内源，下面更换为阿里源。")]),s._v(" "),t("h6",{attrs:{id:"_1-修改-etc-apt-sources-list-文件中地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-修改-etc-apt-sources-list-文件中地址","aria-hidden":"true"}},[s._v("#")]),s._v(" 1. 修改 /etc/apt/sources.list 文件中地址")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("#deb http://mirrordirector.raspbian.org/raspbian/ stretch main contrib non-free rpi")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("# Uncomment line below then 'apt-get update' to enable 'apt-get source'")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("#deb-src http://archive.raspbian.org/raspbian/ stretch main contrib non-free rpi")]),s._v("\n\n"),t("span",{attrs:{class:"token comment"}},[s._v("# use ustc mirror:")]),s._v("\ndeb http://mirrors.aliyun.com/raspbian/raspbian/ stretch main contrib non-free rpi\n")])])]),t("h6",{attrs:{id:"_2-修改-etc-apt-raspi-list-文件中地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改-etc-apt-raspi-list-文件中地址","aria-hidden":"true"}},[s._v("#")]),s._v(" 2. 修改 /etc/apt/raspi.list 文件中地址")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("#deb http://archive.raspberrypi.org/debian/ stretch main ui")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("# Uncomment line below then 'apt-get update' to enable 'apt-get source'")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("#deb-src http://archive.raspberrypi.org/debian/ stretch main ui")]),s._v("\n\n"),t("span",{attrs:{class:"token comment"}},[s._v("# use ustc mirror:")]),s._v("\ndeb http://mirrors.aliyun.com/debian/ stretch main ui\n")])])]),t("h3",{attrs:{id:"_1-4-安装-vnc-服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-安装-vnc-服务","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.4 安装 vnc 服务")]),s._v(" "),t("p",[s._v("对于安装了 Raspbian 桌面系统来说，还有一步就是连接到 Raspbian 的桌面，这里使用 vnc 来进行连接。")]),s._v(" "),t("h6",{attrs:{id:"_1-在树莓派上安装-vnc-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-在树莓派上安装-vnc-server","aria-hidden":"true"}},[s._v("#")]),s._v(" 1. 在树莓派上安装 vnc-server")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" tightvncserver  \n")])])]),t("h6",{attrs:{id:"_2-启动-vnc-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动-vnc-server","aria-hidden":"true"}},[s._v("#")]),s._v(" 2. 启动 vnc-server")]),s._v(" "),t("div",{staticClass:"language-sehll extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("tightvncserver\n")])])]),t("p",[s._v("接下来会要求设置密码和 view-only 密码并启动服务。")]),s._v(" "),t("h6",{attrs:{id:"_3-电脑上连接到树莓派"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-电脑上连接到树莓派","aria-hidden":"true"}},[s._v("#")]),s._v(" 3. 电脑上连接到树莓派")]),s._v(" "),t("p",[s._v("使用 "),t("a",{attrs:{href:"https://www.realvnc.com/download/viewer/",target:"_blank",rel:"noopener noreferrer"}},[s._v("vnc-viewer"),t("OutboundLink")],1),s._v(" 客户端，根据树莓派的 ip 和上一步中的启动端口(比如 192.168.1.201:1)和密码即可连接到 Raspbian 桌面")]),s._v(" "),t("h2",{attrs:{id:"二、其它配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、其它配置","aria-hidden":"true"}},[s._v("#")]),s._v(" 二、其它配置")]),s._v(" "),t("h6",{attrs:{id:"_1-更改时区"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-更改时区","aria-hidden":"true"}},[s._v("#")]),s._v(" 1. 更改时区")]),s._v(" "),t("p",[s._v("刚装玩系统可以通过 "),t("code",[s._v("date -R")]),s._v(" 命令查看时区，如果不对，使用 "),t("code",[s._v("cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime")]),s._v(" 命令将时区修改为东八区。")])])},[],!1,null,null,null);r.options.__file="树莓派快速上手简明指北.md";a.default=r.exports}}]);